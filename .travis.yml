language: php
php:
  - 5.5
  - 5.4
node_js:
  - "0.10"  
services:
  - mysql
  - redis

before_script:
  - php composer.phar install
  - npm install -g bower
  - bower install
  - cd protected/node
  - npm install
  - cd ../../
  - mysql -e 'create database myapp_test;'
  - cp protected/config/config.php.travis protected/config/config.php
  - chmod -R 777 assets/
  - chmod -R 777 protected/runtime
  - ./protected/yiic migrate --interactive=0


script: phpunit --configuration test/phpunit.xml

